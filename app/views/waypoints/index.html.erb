<script>
  var json = JSON.parse(response.body);
  console.log(json);
</script>

<p id="notice"><%= notice %></p>

<div class="container-fluid">
  <h1 class="d-flex justify-content-center">Waypoints</h1>

  <br>
  
  <table class="table">
    <thead class="thead-dark">
      <tr class="align-middle">
        <th>Latitude</th>
        <th>Longitude</th>
        <th>Sent at</th>
        <th>Vehicle</th>
        <th colspan="3">Options</th>
      </tr>
    </thead>

    <tbody>
      <% @waypoints.each do |waypoint| %>
        <tr>
          <td class="align-middle"><%= waypoint.latitude %></td>
          <td class="align-middle"><%= waypoint.longitude %></td>
          <td class="align-middle"><%= waypoint.sent_at %></td>
          <!--<td><%= waypoint.vehicle_id %></td>
          <td><%= link_to 'Show', waypoint %></td>
          <td><%= link_to 'Edit', edit_waypoint_path(waypoint) %></td>
          <td><%= link_to 'Destroy', waypoint, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
          <td class="align-middle"><%= waypoint.vehicle.vehicle_name %></td>
          <td class="align-middle"><%= link_to waypoint, class: 'btn btn-light btn-sm rounded-circle' do %> 
            <i class="material-icons">remove_red_eye</i> <% end %></td>
          <td class="align-middle"><%= link_to edit_waypoint_path(waypoint), class: 'btn btn-light btn-sm rounded-circle' do %> 
            <i class="material-icons">edit</i> <% end %></td>
          <td class="align-middle"><%= link_to waypoint, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-light btn-sm rounded-circle' do %>
            <i class="material-icons">delete</i> <% end %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <br>

  <div class="row justify-content-between">
      <%= form_for @waypoint, url: search_vehicle_path do |form| %>
        <%= collection_select(:waypoint, params[:vehicle_id], @vehicles, :id, :vehicle_name, {:prompt => false}, class: 'form-control col-md-3')  %>
        <!--<%= link_to 'Search', search_vehicle_path(@waypoints), class: 'btn btn-dark', style: 'color:white' %>-->
        <%= form.submit 'Search', class: 'btn btn-dark float-right', style: 'color:white'%>
      <% end %>
    <%= link_to 'New Waypoint', new_waypoint_path, class: 'btn btn-dark', style: 'color:white' %>
  </div>

<div>